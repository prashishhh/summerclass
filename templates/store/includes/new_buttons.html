{% if product.stock <= 0 %}
    <button class="btn btn-danger" disabled>Out of Stock</button>

    {% if user.is_authenticated %}
      {% if product.is_approved and product.status and product.owner != user %}
        <!-- Request button + modal include -->
        <button class="btn btn-primary" data-toggle="modal" data-target="#requestModal">
          Request Product
        </button>
        {% include 'store/includes/request_modal.html' %}
      {% elif product.owner == user %}
        <small class="text-muted d-block mt-2">You own this product.</small>
      {% endif %}
    {% else %}
      <a class="btn btn-primary" href="{% url 'user_login' %}?next={{ request.path }}">
        Log in to request
      </a>
    {% endif %}

  {% elif product.stock <= 5 %}
    <p class="text-warning">Only {{ product.stock }} left in stock!</p>
    {% if product.owner == user %}
      <button class="btn btn-secondary" disabled>
        You own this product
      </button>
    {% else %}
        <button type="submit" class="btn btn-primary">
          <span class="text">Add to Cart</span> <i class="fas fa-shopping-cart"></i>
        </button>
    {%endif%}

  {% else %} {# stock > 5 #}
    {% if user.is_authenticated and product.owner_id == user.id %}
      <button class="btn btn-secondary" disabled>
        You own this product
      </button>
    {% else %}
        <button type="submit" class="btn btn-primary">
          <span class="text">Add to Cart</span> <i class="fas fa-shopping-cart"></i>
        </button>
    {%endif%}
  {% endif %}